class Solution {
    int[][] memo;
    static final int mod = (int)1e9+7;
    List<List<Integer>> jumps = Arrays.asList(
        List.of(4, 6),
        List.of(6, 8),
        List.of(7, 9),
        List.of(4, 8),
        List.of(0, 3, 9),
        List.of(),
        List.of(0, 1, 7),
        List.of(2, 6),
        List.of(1, 3),
        List.of(2, 4)
    );

    private int dp(int remain, int square) {
        if(remain == 0) return 1;
        if(memo[remain][square] != 0) return memo[remain][square];

        int ans = 0;
        for(int nextSquare: jumps.get(square)) {
            ans = (ans + dp(remain-1, nextSquare))%mod;
        }
        memo[remain][square] = ans;

        return ans;
    }
    public int knightDialer(int n) {
        memo = new int[n][10];
        int ans = 0;
        for(int i=0; i<=9; i++) {
            ans = (ans + dp(n-1, i)) % mod;
        }
        return ans;
    }
}
